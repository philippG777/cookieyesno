var CookieYesNo=function(){"use strict";function t(t){this.version="1.1.0",this.cookie={set:function(t){var e=new Date;e.setTime(e.getTime()+7776e6),document.cookie="_cyn="+t+";expires="+e.toUTCString()+";path=/;SameSite=Lax"},get:function(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){var n=t[e].trim().split("=");if("_cyn"==n[0])return n[1]}return null},clear:function(){document.cookie="_cyn=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;SameSite=Lax"}},this._config=t;var n=["onAccept","onReject","onChange"];this._loopOverCategories(function(e){n.forEach(function(t){void 0===e[t]&&(e[t]=[])})}),this.banner=this._createBanner(),this._applyStyle(),this._addListeners();var e=this._load();null==e?this.show():e.version!=this.version||null!=this._config.version&&this._config.version!=e.configversion?(this.cookie.clear(),this.show()):this._runListeners()}return t.prototype._load=function(){var t=this.cookie.get();return null==t?null:JSON.parse(t)},t.prototype._save=function(t){var e={version:this.version,settings:t};null!=this._config.version&&(e.configversion=this._config.version),this.cookie.set(JSON.stringify(e))},t.prototype.getSettings=function(){var t=this._load();return null==t?{}:t.settings},t.prototype.onChange=function(t,e){this._config.categories[t].onChange.push(e)},t.prototype.onAccept=function(t,e){!0===this.getSettings()[t]&&e(),this._config.categories[t].onAccept.push(e)},t.prototype.onReject=function(t,e){!1===this.getSettings()[t]&&e(),this._config.categories[t].onReject.push(e)},t.prototype.reviewSettings=function(){this._bannerApplySettings(this.getSettings()),this.show()},t.prototype._createBanner=function(){var t=document.createElement("div");t.className="cyn-banner";var n='<h3 style="font-size:28px;font-weight:bold;margin-top:16px;margin-bottom:20px">'+this._config.title+"</h3>";return n+="<p>"+this._insertLinks(this._config.text.above)+"</p>",n+='<button class="cyn-btn-accept-all">'+this._config.acceptAllButtonText+"</button>",n+='<button class="cyn-btn-save">'+this._config.acceptSelectionButtonText+"</button>",n+='<table class="cyn-categories"><tbody>',this._loopOverCategories(function(t,e){n+='<tr><td style="font-weight:bold">'+t.name+"</td><td>"+t.description+"</td><td>",n+='<input type="checkbox" value="'+e+'"'+(t.allowed?" checked":"")+(!0===t.changeable||void 0===t.changeable?"":" disabled")+"/>",n+="</td></tr>"}),n+="</tbody></table>",n+="<p>"+this._insertLinks(this._config.text.below)+"</p>",n+='<div class="cyn-other-links" style="padding-top:6px;padding-bottom:8px;font-size:12px">',null!=this._config.imprint&&(n+=this._createLink(this._config.imprint)+" "),null!=this._config.privacyPolicy&&(n+=this._createLink(this._config.privacyPolicy)+" "),null!=this._config.cookiePolicy&&(n+=this._createLink(this._config.cookiePolicy)),n+="</div>",t.innerHTML=n,t.style.display="none",document.body.appendChild(t),t},t.prototype._bannerApplySettings=function(t){for(var e=this.banner.getElementsByTagName("input"),n=0;n<e.length;n++)"checkbox"==e[n].type&&(e[n].checked=null!=t[e[n].value]&&1==t[e[n].value])},t.prototype._applyStyle=function(){var t=this.banner.style;t.zIndex=5e3,t.backgroundColor="#fff",t.position="fixed",t.padding="16px",t.boxShadow="0 0 24px #aaa",t.borderRadius="8px",t.fontSize="14px",t.fontFamily='"Trebuchet MS", Helvetica, sans-serif',t.color="#444",t.overflowY="auto",window.innerWidth<=768?(t.top=t.right=t.left=t.bottom="16px",t.maxWidth="80%"):(t.right=t.bottom="32px",t.maxHeight="80vh",t.maxWidth="40%"),(t=this.banner.getElementsByTagName("table")[0].style).margin="16px";for(var e=this.banner.getElementsByTagName("td"),n=0;n<e.length;n++)e[n].style.padding="8px";for(var i=this.banner.getElementsByTagName("button"),o=0;o<i.length;o++)(t=i[o].style).boxSizing="border-box",t.cursor="pointer",t.margin="12px",t.marginLeft="10%",t.borderRadius="4px",t.border="0px",t.backgroundColor="#48c774",t.color="white",t.fontSize="18px",t.padding="8px",t.paddingLeft=t.paddingRight="12px",t.display="block";for(var r=this.banner.getElementsByTagName("a"),s=0;s<r.length;s++)r[s].style.color="#333"},t.prototype._addListeners=function(){for(var t=this.banner.getElementsByTagName("button"),e=0;e<t.length;e++)t[e].addEventListener("click",this._onButtonClick.bind(this))},t.prototype._onButtonClick=function(t){var e={},n=t.target.className;if(-1!=n.indexOf("cyn-btn-accept-all"))for(var i in this._config.categories)e[i]=!0;else{if(-1==n.indexOf("cyn-btn-save"))return;for(var o=this.banner.getElementsByTagName("input"),r=0;r<o.length;r++)"checkbox"==o[r].type&&(e[o[r].value]=o[r].checked)}this.hide(),this._runListeners(e),this._save(e)},t.prototype._runListeners=function(e){var i=this,o=void 0===e;void 0===e&&(e=this.getSettings()),this._loopOverCategories(function(t,n){t.onChange.forEach(function(t){return t(e[n])}),!0===e[n]?(t.onAccept.forEach(function(t){return t()}),i._activateScriptsOfCategory(n)):t.onReject.forEach(function(t){var e=t();o||!1===e||void 0!==i._config.categories[n].reloadOnReject&&!0!==i._config.categories[n].reloadOnReject||location.reload()})})},t.prototype._loopOverCategories=function(t){for(var e in this._config.categories)t(this._config.categories[e],e)},t.prototype._insertLinks=function(t){return(t=(t=t.replace("COOKIE_POLICY",this._createLink(this._config.cookiePolicy))).replace("PRIVACY_POLICY",this._createLink(this._config.privacyPolicy))).replace("IMPRINT",this._createLink(this._config.imprint))},t.prototype._createLink=function(t){return'<a href="'+t.url+'">'+t.text+"</a>"},t.prototype._activateScriptsOfCategory=function(t){document.querySelectorAll("script[data-cyn-require="+t+"]").forEach(function(t){var e;void 0===t.dataset.cynDone&&(t.dataset.cynDone=!0,e=document.createElement("script"),null==t.dataset.cynSrc?e.innerText=t.innerText:e.src=t.dataset.cynSrc,document.body.appendChild(e))})},t.prototype.show=function(){this.banner.style.display="block"},t.prototype.hide=function(){this.banner.style.display="none"},t}();
